<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>debug—api</title>
    <!-- 当前页面样式 -->
    <link rel="stylesheet" href="./css/index.css">
    <script src="./js/jquery.min.js"></script>
    <style>
        .g-iframe {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
    </style>
</head>
<body>
    <%- nav %>
    <div>欢迎使用debug-api</div>
    <div class="page-content">
        <iframe name="contentFrame" id="g_iframe" class="g-iframe" scrolling="auto" frameborder="0" src="about:blank" allowfullscreen="true"></iframe>
    </div>
    <script>
        $(function () {
            // 导航
            $('#nav > li > a').click(function (e) {
                $(this).siblings('ul').stop().animate({height: 'toggle'}).parent().siblings().find('ul').each((i, item) => {
                    if(item.style.display === 'block') {
                        $(item).animate({height: 'toggle'})
                    }
                })
            })
            var iframe = $('#g_iframe')[0]
            // 点击
            $('.sub-menu a').click(function (e) {
                var that = $(this)
                that.parents('#nav').find('a').removeClass('active');
                that.addClass('active')
                location.href = '#' + that.attr('data-hash')
                request(that.attr('data-hash'))
            })
            // 请求
            function request (url) {
                $.ajax({
                    url: url,
                    success(html) {
                        var doc = iframe.contentDocument || iframe.document;
                        doc.write(html)
                    }
                })
            }
            // https://blog.csdn.net/dreamstone_xiaoqw/article/details/80924082
            
        })
    </script>
</body>
</html>